<!-- SecretaryShow Template
 *
 * generate details for project in secretary view
 *
 -->


<f:layout name="Default"/>
<f:section name="main">

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script type="application/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <div class="col-md-12">
<div class="hidden-print">
    <div class="row text-center" style="margin: 20px;">
    <button onclick="window.history.back()" class="btn btn-default"><span class="glyphicon-chevron-left glyphicon"></span> Zur√ºck</button>
   <span id="actionButtons">
    <button onclick="window.print()" class="btn btn-warning">Ausdrucken</button>
   </span>
    </div>
</div>
    <!-- Render Properties -->
    <h3>Stundenverschiebung</h3>
    <br>
    <f:render partial="Project/SecretaryProperties" arguments="{project:project}"/>
    <table class="table">
        <tr>
            <td>
                Druckdatum:
            </td>
            <td>
                <script>
                    var now = new Date();
                    var dd = now.getDate();
                    var mm = now.getMonth()+1;
                    var yyyy = now.getFullYear();
                    var h = now.getHours();
                    var m = now.getMinutes();
                    var s = now.getSeconds();
                    if(dd<10) {dd='0'+dd}
                    if(mm<10) {mm='0'+mm}
                    if(h<10) {h='0'+h}
                    if(m<10) {m='0'+m}
                    if(s<10) {s='0'+s}
                    now = dd+'.'+mm+'.'+yyyy+' '+h+':'+m+':'+s;
                    document.write(now);
                </script>
            </td>
        </tr>

    </table>
    <br><br>
    <h4>Verschiebungen</h4>
    <div class="table-responsive">
        <table class="table">
            <!-- Render ChangeList -->
            <f:render partial="Project/SecretaryChangeList" arguments="{project:project}"/>
        </table>
    </div>
    </div>
    <script>
        var afterPrint = function() {
            jQuery("#actionButtons").html('<f:link.action action="secretaryChange" class="btn btn-success" arguments="{project:project, modification : \"close\"}"> Projekt abschliessen </f:link.action>');
        };

        if (window.matchMedia) {
            var mediaQueryList = window.matchMedia('print');
            mediaQueryList.addListener(function(mql) {
                if (mql.matches) {

                } else {
                    afterPrint();
                }
            });

        }
        window.onafterprint = afterPrint;
    </script>
</f:section>