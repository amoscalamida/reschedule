<!-- Form Errors Partial
 *
 * gets the form errors and displays them under the field label
 *
 -->


<f:form.validationResults>
    <!-- check if error messages are present -->
    <f:if condition="{validationResults.flattenedErrors}">
        <f:for each="{validationResults.flattenedErrors}" as="errors" key="propertyPath">
            <f:for each="{errors}" as="error">
                <script>
                    // split property path to get only property name
                    property = ("{propertyPath}").split(".")[1];
                    // find label for property and append the translated error message
                    var label = $('label[for="' + property + '"]');
                    label.append("<p class='text-danger'><f:translate key='error.{error.code}'> </f:translate></p>");
                    label.next().next().removeClass("f3-form-error");
                    label.parent().addClass("has-error");

                    console.log("{error.code}, {error.message}, {propertyPath}");
                </script>
            </f:for>
        </f:for>
    </f:if>
</f:form.validationResults>